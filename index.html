<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>å°å—æµªæ¼«å†’éšªè§£é–ï½œæ‰‹å¸³æ—…è¡Œç¥¨</title>
<meta name="description" content="é€™ä¸æ˜¯æ™®é€šçš„æ—…è¡Œï¼Œè€Œæ˜¯å°ˆå±¬å¦³çš„å†’éšªã€‚">
<style>
  :root{
    /* éœ§é¢è‰²ç¥¨ */
    --cream:#FDFBF7;   /* å¥¶æ²¹ç±³ç™½ï¼ˆåº•ï¼‰ */
    --sage:#AFCDBE;    /* éœ§æ¹–ç¶ ï¼ˆä¸»ï¼‰ */
    --sage-deep:#8FB8A8;
    --wood:#9C7E68;    /* æœ¨æ£•ï¼ˆé‡é»ï¼‰ */
    --ink:#2F2F2F;     /* å¢¨é»‘ï¼ˆæ–‡å­—ï¼‰ */
    --muted:#777;      /* æ¬¡è¦å­— */
    --paper:#FFFFFF;   /* å¡ç‰‡åº• */
    --ring:rgba(143,184,168,.30);

    --r-lg:20px; --r-md:14px;
    --shadow:0 10px 24px rgba(0,0,0,.07);
    --shadow-soft:0 6px 16px rgba(0,0,0,.06);
    --tap:translateY(1px) scale(.99);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;color:var(--ink);
    font-family:"Noto Sans TC","PingFang TC","Microsoft JhengHei",Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    background:
      radial-gradient(1100px 680px at 110% -10%, #E8EFE9 0%, rgba(232,239,233,0) 55%),
      radial-gradient(900px 600px at -10% 15%, #EFECE6 0%, rgba(239,236,230,0) 55%),
      var(--cream);
  }
  .wrap{max-width:820px;margin:0 auto;padding:14px 14px 120px}

  /* heroï¼ˆå¯æ›æˆä½ è‡ªå·±çš„å··å¼„ç…§ï¼Œå…ˆç”¨ç´”è‰²+ç´‹ç†ï¼‰ */
  .hero{
    position:relative;height:160px;border-radius:var(--r-lg);overflow:hidden;
    background:linear-gradient(180deg,#e8f0ec,#f7f4ef);
    box-shadow:var(--shadow-soft);
  }
  .hero::after{
    content:"";position:absolute;inset:0;pointer-events:none;
    background:repeating-linear-gradient(45deg, rgba(255,255,255,.15) 0 8px, rgba(255,255,255,0) 8px 16px);
    mix-blend-mode:overlay;
  }
  .hero-tag{
    position:absolute;left:14px;bottom:14px;
    background:#fff; border:1px solid #e7efe9; color:#4a5f55;
    padding:8px 12px;border-radius:12px;display:inline-flex;gap:8px;align-items:center;
    box-shadow:var(--shadow-soft);font-weight:700;
  }

  header{display:flex;align-items:flex-end;justify-content:space-between;margin:12px 2px 10px}
  h1{margin:0;font-size:22px;letter-spacing:.3px}
  .sub{margin:2px 0 0;color:var(--muted);font-size:13px}

  /* ç¥¨åˆ¸é€²åº¦ï¼ˆ4å¼µï¼‰ */
  .tickets{display:flex;gap:10px;margin:10px 0 14px;flex-wrap:wrap}
  .t{
    flex:1 1 160px; min-width:150px; background:var(--paper);
    border:2px dashed #ddd3ca;border-radius:16px;position:relative;
    padding:8px 10px; box-shadow:var(--shadow-soft);
  }
  .t::before,.t::after{
    content:""; position:absolute; top:50%; transform:translateY(-50%);
    width:18px; height:18px; background:var(--cream); border-radius:50%;
    border:1px solid #e8e0d7;
  }
  .t::before{left:-10px}
  .t::after{right:-10px}
  .t-title{font-size:12px;color:#6b5a4f}
  .stamp-mini{
    position:absolute;right:6px;bottom:6px;font-size:12px;
    color:#b76e79;border:1px solid #d8a2aa; border-radius:6px;padding:2px 6px;
    transform:rotate(-10deg) scale(.9);opacity:.15;transition:.2s
  }
  .t[data-done="true"] .stamp-mini{opacity:.9}

  /* å¤§ç¥¨åˆ¸ï¼ˆæ¯ä¸€æ­¥çš„å¡ï¼‰ */
  .ticket{
    background:var(--paper);
    border:2px dashed #d9d3cc;border-radius:20px;box-shadow:var(--shadow);
    padding:16px; position:relative; animation:fade .2s ease;
  }
  .ticket::before{
    content:"âœ‚"; position:absolute; top:-10px; left:50%; transform:translateX(-50%);
    background:var(--cream); padding:0 4px; color:#b4a79c; font-size:14px;
  }
  @keyframes fade{from{opacity:0; transform:translateY(6px)} to{opacity:1; transform:translateY(0)}}

  /* æ’ç•«å¡ç‰‡æ¨™é ­ */
  .card-head{display:flex;gap:10px;align-items:center;margin-bottom:10px}
  .sticker{
    width:44px;height:44px;border-radius:12px;flex:0 0 auto;
    display:grid;place-items:center;
    background: conic-gradient(from 210deg at 50% 50%, #bcd6c9, #f4ede6);
    box-shadow: var(--shadow-soft);
  }
  .card-title{font-size:18px;margin:0}
  .hint{font-size:13px;color:#566b62;background:#f4f8f6;border:1px dashed #d7e6df;padding:10px;border-radius:12px;margin-top:8px}

  /* é¸é …ï¼ˆè²¼ç´™ï¼‰ */
  .options{display:grid;gap:12px;margin-top:10px}
  .opt{
    background:#fdfaf5;border:1.5px solid #e3ddd6;border-radius:14px;
    padding:12px;display:flex;align-items:center;gap:10px;font-size:16px;cursor:pointer;
    transition:.15s; position:relative; min-height:52px;
  }
  .opt:hover{background:#f9f5ef}
  .opt .ico{font-size:22px}
  .opt[data-selected="true"]{
    border-color:var(--sage); background:#F2F7F4;
    box-shadow:0 8px 18px var(--ring);
  }
  .stamp{
    position:absolute; right:10px; top:8px;
    font-size:18px; color:var(--sage-deep); opacity:0; transform:scale(.6) rotate(-12deg);
    transition:.15s;
  }
  .opt[data-selected="true"] .stamp{opacity:1; transform:scale(1) rotate(-6deg)}

  /* åº•éƒ¨æ“ä½œåˆ—ï¼ˆæ‹‡æŒ‡æ˜“é»ï¼‰ */
  .bar{
    position:fixed; left:0; right:0; bottom:0; background:rgba(253,251,247,.90);
    backdrop-filter: blur(6px); border-top:1px solid #eae5de; padding:10px 12px;
  }
  .bar-inner{max-width:820px;margin:0 auto;display:flex;gap:10px}
  .btn{
    flex:1; display:inline-flex; align-items:center; justify-content:center; gap:8px;
    padding:14px; border-radius:16px; border:1px solid transparent; cursor:pointer;
    font-weight:700; letter-spacing:.3px; min-height:50px; user-select:none; transition:.12s ease;
  }
  .btn:active{transform:var(--tap)}
  .btn.primary{background:linear-gradient(180deg,#a9cbbb,#8FB8A8); color:#0c2f24; box-shadow:0 10px 22px var(--ring)}
  .btn.ghost{background:#fff; color:#6a5a4f; border-color:#eadfd4}
  .btn.wood{background:linear-gradient(180deg,#b9967f,#9C7E68); color:#fff}

  /* çµæœå¡ */
  .result{
    background:#fffefb;border:2px dashed #e6dccf;border-radius:20px;box-shadow:var(--shadow);padding:16px;position:relative
  }
  .seal{
    position:absolute; right:14px; top:14px;
    color:#b76e79; border:3px double #c88b94; border-radius:50%;
    padding:10px 12px; font-weight:900; transform:rotate(-12deg); opacity:.9;
  }
  .res-line{margin:8px 0; font-size:16px}
  .quote{background:#fffdf7;border:1px solid #f0e8d9;color:#6b4f2e;border-radius:14px;padding:12px;margin-top:12px}

  /* æç¤º */
  .toast{
    position:fixed; left:50%; bottom:22px; transform:translateX(-50%);
    background:#1f1f1f; color:#fff; padding:10px 14px; border-radius:12px; opacity:0; transition:.18s; z-index:9999; font-size:13px
  }

  .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
</style>
</head>
<body>
  <div class="wrap">
    <!-- hero -->
    <div class="hero" role="img" aria-label="å°å—å··å¼„æŸ”éœ§èƒŒæ™¯">
      <div class="hero-tag" aria-hidden="true">ğŸ“’ å¯æ„›æ‰‹å¸³æ—…è¡Œç¥¨</div>
    </div>

    <!-- æ¨™é¡Œ -->
    <header>
      <div>
        <h1>å°å—æµªæ¼«å†’éšªè§£é–</h1>
        <p class="sub">é€™ä¸æ˜¯æ™®é€šçš„æ—…è¡Œï¼Œè€Œæ˜¯å±¬æ–¼å¦³çš„ 1 åˆ†é˜å°é¸æ“‡ã€‚</p>
      </div>
    </header>

    <!-- ç¥¨åˆ¸é€²åº¦ï¼šå®Œæˆæœƒè“‹ç«  -->
    <div class="tickets" aria-label="é€²åº¦ç¥¨åˆ¸" aria-live="polite">
      <div class="t" data-step="1"><div class="t-title">â‘  ä¸»é¡Œ</div><div class="stamp-mini">å·²ä½¿ç”¨</div></div>
      <div class="t" data-step="2"><div class="t-title">â‘¡ å‘³é“</div><div class="stamp-mini">å·²ä½¿ç”¨</div></div>
      <div class="t" data-step="3"><div class="t-title">â‘¢ ä¼‘æ¯</div><div class="stamp-mini">å·²ä½¿ç”¨</div></div>
      <div class="t" data-step="4"><div class="t-title">â‘£ å½©è›‹</div><div class="stamp-mini">å·²ä½¿ç”¨</div></div>
    </div>

    <!-- ä¸»å®¹å™¨ -->
    <main id="panel" aria-live="polite">
      <!-- Welcomeï¼ˆç›´æ¥é¡¯ç¤º Step1ï¼Œé€™æ®µå¯ä¿ç•™åšéå ´ï¼‰ -->
      <section data-screen="step1" class="ticket">
        <div class="card-head">
          <div class="sticker">ğŸ´</div>
          <h2 class="card-title">ä»Šå¤©æœ€æƒ³å±•é–‹çš„æ–‡é’å ´æ™¯æ˜¯ï¼Ÿ</h2>
        </div>
        <div class="options" role="group" aria-label="æ–‡é’å ´æ™¯">
          <button class="opt" data-value="å¥‡ç¾åšç‰©é¤¨ ğŸ¨ï¼ˆå±•è¦½ï¼‹è—è¡“ï¼‹æ‹ç…§ï¼‰"><span class="ico">ğŸ¨</span>å¥‡ç¾åšç‰©é¤¨<span class="stamp">âœ”</span></button>
          <button class="opt" data-value="å­”å»Ÿè€è¡— ğŸ®ï¼ˆæ­·å²æ°›åœï¼‹ç‰¹è‰²å°åº—ï¼‰"><span class="ico">ğŸ®</span>å­”å»Ÿè€è¡—<span class="stamp">âœ”</span></button>
          <button class="opt" data-value="åé¼“ç³–å»  ğŸŒ™ï¼ˆå·¥æ¥­éºè·¡ï¼‹å¤œé–“ç‡ˆå…‰ï¼‰"><span class="ico">ğŸŒ™</span>åé¼“ç³–å» <span class="stamp">âœ”</span></button>
          <button class="opt" data-value="äº¤çµ¦ä½ å®‰æ’ ğŸ"><span class="ico">ğŸ</span>äº¤çµ¦ä½ å®‰æ’<span class="stamp">âœ”</span></button>
        </div>
        <p id="fb1" class="hint" style="display:none;margin-top:10px"></p>
      </section>

      <section data-screen="step2" class="ticket" hidden>
        <div class="card-head">
          <div class="sticker">ğŸœ</div>
          <h2 class="card-title">æ—…ç¨‹è£¡ï¼Œå¦³æœ€æƒ³æŠŠå“ªå€‹å‘³é“å¯«é€²ä»Šå¤©ï¼Ÿ</h2>
        </div>
        <div class="options" role="group" aria-label="é£Ÿç‰©/é£²å“åå¥½">
          <button class="opt" data-value="å°å—å°åƒ ğŸœï¼ˆç‰›è‚‰æ¹¯/æ“”ä»”éºµ/æ£ºææ¿ï¼‰"><span class="ico">ğŸœ</span>å°å—å°åƒ<span class="stamp">âœ”</span></button>
          <button class="opt" data-value="è€å’–å•¡å»³ â˜•ï¼ˆè€å®…çš„æ‰‹æ²–èˆ‡æœ¨è³ªé¦™ï¼‰"><span class="ico">â˜•</span>è€å’–å•¡å»³<span class="stamp">âœ”</span></button>
          <button class="opt" data-value="ç”œé»æˆ–å†°å“ ğŸ§ï¼ˆå¯æ„›ç™‚ç™’ä¸€ä¸‹ï¼‰"><span class="ico">ğŸ§</span>ç”œé»æˆ–å†°å“<span class="stamp">âœ”</span></button>
          <button class="opt" data-value="äº¤çµ¦ä½ å®‰æ’ ğŸï¼ˆæˆ‘æƒ³è¦é©šå–œï¼‰"><span class="ico">ğŸ</span>äº¤çµ¦ä½ å®‰æ’<span class="stamp">âœ”</span></button>
        </div>
        <p id="fb2" class="hint" style="display:none;margin-top:10px"></p>
      </section>

      <section data-screen="step3" class="ticket" hidden>
        <div class="card-head">
          <div class="sticker">â˜•</div>
          <h2 class="card-title">ä¼‘æ¯çš„æ™‚å€™ï¼Œæˆ‘å€‘è¦ååœ¨å“ªå€‹è§’è½ï¼Ÿ</h2>
        </div>
        <div class="options" role="group" aria-label="å’–å•¡å»³æ°›åœ">
          <button class="opt" data-value="KKOBA Apartmentï¼ˆæ–‡é’ç°¡ç´„ã€å®‰éœèŠå¤©ï¼‰"><span class="ico">ğŸ </span>KKOBA Apartment<span class="stamp">âœ”</span></button>
          <button class="opt" data-value="è‰æœ¨æ£®èŠ±ï¼ˆè€å®…ï¼‹èŠ±è—æ„Ÿï¼‰"><span class="ico">ğŸŒ¿</span>è‰æœ¨æ£®èŠ±<span class="stamp">âœ”</span></button>
          <button class="opt" data-value="é¹½åŸ•è€å’–å•¡å»³ç¾¤ï¼ˆéš¨æ©ŸæŒ‘ä¸€å®¶ï¼‰"><span class="ico">ğŸšï¸</span>é¹½åŸ•è€å’–å•¡å»³ç¾¤<span class="stamp">âœ”</span></button>
          <button class="opt" data-value="å¯æ„›ç”œé»é¢¨å’–å•¡ï¼ˆç¹½ç´›ç™‚ç™’ï¼‰"><span class="ico">ğŸ°</span>å¯æ„›ç”œé»é¢¨<span class="stamp">âœ”</span></button>
          <button class="opt" data-value="äº¤çµ¦ä½ å®‰æ’ï¼ˆæƒ³çœ‹ä½ çš„å°ä»»æ€§ï¼‰"><span class="ico">âœ¨</span>äº¤çµ¦ä½ å®‰æ’<span class="stamp">âœ”</span></button>
        </div>
        <p id="fb3" class="hint" style="display:none;margin-top:10px"></p>
      </section>

      <section data-screen="step4" class="ticket" hidden>
        <div class="card-head">
          <div class="sticker">ğŸ“¸</div>
          <h2 class="card-title">ä»Šå¤©çš„ç•«é¢ï¼Œè¦æ€éº¼ç•™ï¼Ÿï¼ˆå½©è›‹ï¼‰</h2>
        </div>
        <div class="options" role="group" aria-label="æµªæ¼«æ”¶å°¾">
          <button class="opt" data-value="é¢¨æ™¯ç…§ ğŸŒ†"><span class="ico">ğŸŒ†</span>é¢¨æ™¯ç…§<span class="stamp">âœ”</span></button>
          <button class="opt" data-value="æˆ‘å€‘çš„åˆç…§ ğŸ“¸"><span class="ico">ğŸ“¸</span>æˆ‘å€‘çš„åˆç…§<span class="stamp">âœ”</span></button>
          <button class="opt" data-value="åªæœ‰æˆ‘å€‘æ‡‚çš„ç§å¯†ç•«é¢ ğŸ’Œ"><span class="ico">ğŸ’Œ</span>ç§å¯†ç•«é¢<span class="stamp">âœ”</span></button>
          <button class="opt" data-value="é‡è¦‹äº†å†èªª"><span class="ico">ğŸŒŸ</span>é‡è¦‹äº†å†èªª<span class="stamp">âœ”</span></button>
        </div>
        <p id="fb4" class="hint" style="display:none;margin-top:10px"></p>
      </section>

      <section data-screen="result" class="result" hidden>
        <div class="seal">å·²è§£é–</div>
        <h2 style="margin:0 0 6px">ä»Šå¤©çš„å°å—ï¼Œå› å¦³è€Œå®šç¾©</h2>
        <div id="summary" style="margin-top:6px"></div>
        <div class="quote">æ—…è¡Œæœ‰é¢¨æ™¯ã€æœ‰æ•…äº‹ï¼Œä½†æœ€ç¾çš„ç¬é–“ï¼Œå¸¸å¸¸åœ¨ä¸ç¶“æ„çš„é è¿‘ã€‚<br>ä¸ç®¡å»å“ªè£¡ï¼Œæˆ‘çœŸæ­£æƒ³çœ‹åˆ°çš„é¢¨æ™¯ï¼Œåªæœ‰å¦³ã€‚</div>
      </section>
    </main>
  </div>

  <!-- åº•éƒ¨æ“ä½œåˆ— -->
  <nav class="bar" aria-label="æ“ä½œåˆ—">
    <div class="bar-inner">
      <button class="btn ghost" id="btnBack">ä¸Šä¸€æ­¥</button>
      <button class="btn wood" id="btnRandom">éš¨æ©Ÿ</button>
      <button class="btn primary" id="btnNext">ä¸‹ä¸€æ­¥</button>
    </div>
  </nav>

<script>
  // ===== æ–‡æ¡ˆå›é¥‹ =====
  const FB = {
    step1:[
      "é‚£è£¡çš„å…‰å½±ï¼Œæœƒå¾ˆé©åˆå¦³çš„ç¬‘å®¹ã€‚",
      "æ™‚é–“æ…¢ä¸‹ä¾†ï¼Œæ­£å¥½è®“æˆ‘å¤šçœ‹å¦³ä¸€çœ¼ã€‚",
      "åœ¨ç‡ˆå…‰ä¸‹ï¼Œæˆ‘æƒ³å’Œå¦³é è¿‘ä¸€é»ã€‚"
    ],
    step2:[
      "å°å—çš„æ—¥å¸¸ï¼ŒåŠ ä¸Šå¦³ï¼Œå°±è®Šæˆç¨ä¸€ç„¡äºŒçš„å‘³é“ã€‚",
      "è€å®…è£¡çš„æº«åº¦ï¼Œä¸å¦‚å¦³çš„ä¸€å¥è©±æš–ã€‚",
      "ç”œé»å¯ä»¥åƒï¼Œä½†æœ€ç”œçš„æ˜¯é€™è¶Ÿæ—…ç¨‹ã€‚",
      "é©šå–œæº–å‚™å¥½ï¼Œå°±ç­‰å¦³çš„ç¬‘å®¹ä¾†æ­æ›‰ã€‚"
    ],
    step3:[
      "é‚£å°±æŠŠä¸‹åˆå…‰ï¼Œç•™åœ¨æ¯ç·£ä¸Šã€‚",
      "èŠ±é–‹åœ¨æ¡Œä¸Šï¼Œæº«æŸ”åœ¨å¿ƒè£¡ã€‚",
      "å°‹æ‰¾åªå±¬æ–¼ä»Šå¤©çš„å°ç¢ºå¹¸ã€‚",
      "å¯æ„›ï¼Œæ˜¯ä»Šå¤©çš„é—œéµå­—ã€‚"
    ],
    step4:[
      "é€™å…‰å¥½åƒåœ¨ç­‰æˆ‘å€‘ã€‚",
      "é‚£äº›åªå±¬æ–¼æˆ‘å€‘çš„ç¬é–“ï¼Œæˆ‘æœƒå°å¿ƒæ”¶è—ã€‚"
    ]
  };

  // ===== åŸºæœ¬å…ƒç´  & ç‹€æ…‹ =====
  const panel = document.getElementById('panel');
  const btnBack = document.getElementById('btnBack');
  const btnNext = document.getElementById('btnNext');
  const btnRandom = document.getElementById('btnRandom');
  const tickets = [...document.querySelectorAll('.t')];

  const state = { step:1, picks:{} }; // 1..4ï¼Œresult

  function qs(s,root=document){ return root.querySelector(s); }
  function qsa(s,root=document){ return [...root.querySelectorAll(s)]; }
  const rand = arr => arr[Math.floor(Math.random()*arr.length)];
  const toast = (m)=>{
    const t=document.createElement('div'); t.className='toast'; t.textContent=m;
    document.body.appendChild(t); requestAnimationFrame(()=>t.style.opacity=1);
    setTimeout(()=>{t.style.opacity=0; setTimeout(()=>t.remove(),180)},1400);
  };

  // ===== é¡¯ç¤ºåˆ‡æ› =====
  function showStep(n){
    state.step = n;
    qsa('[data-screen]').forEach(sec=>sec.hidden=true);
    qs('[data-screen="step'+n+'"]').hidden=false;

    // ç¥¨åˆ¸è“‹ç« 
    tickets.forEach(t=>{
      const idx = Number(t.dataset.step);
      t.dataset.done = (idx < n) ? "true" : "false";
      if(idx === n){ t.dataset.done = "true"; } // ç•¶å‰æ­¥ä¹Ÿäº®
    });

    // åº•éƒ¨æŒ‰éˆ•æ–‡æ¡ˆ
    btnBack.textContent = (n===1) ? 'è¿”å›' : 'ä¸Šä¸€æ­¥';
    btnNext.textContent = (n<4) ? 'ä¸‹ä¸€æ­¥' : 'å®Œæˆ';
    btnRandom.textContent = 'éš¨æ©Ÿ';
  }

  function bindStep(stepKey){
    const sec = qs('[data-screen="'+stepKey+'"]');
    const chips = qsa('.opt', sec);
    const fb = qs('#'+stepKey.replace('step','fb'));
    chips.forEach(ch=>{
      ch.addEventListener('click', ()=>{
        chips.forEach(c=> c.dataset.selected='false');
        ch.dataset.selected='true';
        state.picks[stepKey] = ch.dataset.value;
        if(fb){ fb.style.display='block'; fb.textContent = rand(FB[stepKey]); }
      });
    });
  }

  ['step1','step2','step3','step4'].forEach(bindStep);

  // åˆå§‹é¡¯ç¤º Step1
  showStep(1);

  // ===== åº•éƒ¨æ“ä½œåˆ— =====
  btnBack.addEventListener('click', ()=>{
    if(state.step<=1){ showStep(1); return; }
    showStep(state.step-1);
  });

  btnRandom.addEventListener('click', ()=>{
    const key = 'step'+state.step;
    const sec = qs('[data-screen="'+key+'"]');
    const chips = qsa('.opt', sec);
    if(!chips.length) return;
    const pick = rand(chips); pick.click();
    toast('æ›¿å¦³æŠ½äº†ä¸€å€‹å°é©šå–œ');
  });

  btnNext.addEventListener('click', ()=>{
    if(state.step<4){ showStep(state.step+1); return; }
    buildResult();
    qsa('[data-screen]').forEach(sec=>sec.hidden=true);
    qs('[data-screen="result"]').hidden=false;

    // å®Œæˆå¾Œèª¿æ•´æ“ä½œåˆ—ï¼šé‡ä¾† / è¤‡è£½ / åˆ†äº«
    btnBack.textContent='é‡ä¾†';
    btnBack.onclick = ()=>location.reload();

    btnNext.textContent='è¤‡è£½';
    btnNext.onclick = copySummary;

    btnRandom.textContent='åˆ†äº«';
    btnRandom.onclick = shareSummary;

    // æ‰€æœ‰ç¥¨åˆ¸é¡¯ç¤ºå®Œæˆ
    tickets.forEach(t=> t.dataset.done="true");
  });

  // ===== çµæœå¡ =====
  function cleanLabel(s){ return s.replace(/^A\.|^B\.|^C\.|^D\./,'').trim(); }
  function buildResult(){
    const s1 = state.picks.step1 || 'äº¤çµ¦ä½ å®‰æ’ ğŸ';
    const s2 = state.picks.step2 || 'äº¤çµ¦ä½ å®‰æ’ ğŸ';
    const s3 = state.picks.step3 || 'äº¤çµ¦ä½ å®‰æ’';
    const s4 = state.picks.step4 ? `å°æ”¶å°¾ï¼š${state.picks.step4}` : 'å°æ”¶å°¾ï¼šé‡è¦‹äº†å†èªªã€‚';

    qs('#summary').innerHTML = "";
  }

  async function copySummary(){
    const text = qs('#summary').innerText.replace(/\n{2,}/g,"\n").trim();
    try{ await navigator.clipboard.writeText(text); toast('å·²è¤‡è£½å…¨æ–‡'); }catch{ toast('è¤‡è£½å¤±æ•—ï¼Œè«‹æ‰‹å‹•é¸å–'); }
  }
  async function shareSummary(){
    const text = qs('#summary').innerText.replace(/\n{2,}/g,"\n").trim();
    if(navigator.share){ try{ await navigator.share({text}); }catch{} }
    else{ copySummary(); }
  }
</script>
</body>
</html>
