<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>å°å—æµªæ¼«å†’éšªè§£é–</title>
<meta name="description" content="é€™ä¸æ˜¯æ™®é€šçš„æ—…è¡Œï¼Œè€Œæ˜¯å°ˆå±¬å¦³çš„å†’éšªã€‚">
<style>
  :root{
    /* Palette */
    --cream:#F7F4EF;   /* å¥¶æ²¹ç±³ç™½ */
    --sage:#8FB8A8;    /* éœ§æ¹–ç¶  */
    --wood:#9C7E68;    /* æœ¨è³ªæ£• */
    --ink:#2f2f2f;     /* å¢¨é»‘ */
    --muted:#6f6f6f;
    --card:#ffffff;
    --ring:rgba(143,184,168,.28);

    /* UI */
    --r-lg:20px; --r-md:14px; --r-sm:10px;
    --shadow:0 12px 28px rgba(0,0,0,.06);
    --shadow-soft:0 8px 20px rgba(0,0,0,.05);
    --tap:translateY(1px) scale(.99);
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; color:var(--ink);
    font-family: "Noto Sans TC","PingFang TC","Microsoft JhengHei",Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    background:
      radial-gradient(1100px 680px at 110% -10%, #e7eee9 0%, rgba(231,238,233,0) 55%),
      radial-gradient(900px 600px at -10% 15%, #efece6 0%, rgba(239,236,230,0) 55%),
      var(--cream);
  }
  .wrap{max-width:780px;margin:0 auto;padding:14px 14px 100px}

  /* Hero */
  .hero{
    position:relative;height:160px;border-radius:var(--r-lg);overflow:hidden;
    background:#d1ddd6; box-shadow:var(--shadow-soft);
  }
  .hero::before{
    /* å°é¢åœ–å ä½ï¼šå¯æ›æˆä½ çš„å··å¼„/å’–å•¡å»³ç…§ */
    content:""; position:absolute; inset:0;
    background:url('https://images.unsplash.com/photo-1558591710-4b4a1ae0f04d?q=80&w=1600&auto=format&fit=crop') center/cover;
    filter:saturate(.85) contrast(.98);
  }
  .hero::after{
    /* éœ§é¢é®ç½© */
    content:""; position:absolute; inset:0;
    background:linear-gradient(180deg, rgba(247,244,239,.35), rgba(247,244,239,.75) 65%, rgba(247,244,239,.95));
    backdrop-filter: blur(2px);
  }
  .hero-tag{
    position:absolute; left:14px; bottom:14px;
    background:#fff; color:#4a5f55; border:1px solid #e7efe9;
    padding:8px 12px; border-radius:12px; display:inline-flex; gap:8px; align-items:center;
    box-shadow:var(--shadow-soft); font-weight:600;
  }
  .hero-tag svg{width:18px;height:18px}

  /* Header */
  header{display:flex; align-items:flex-end; justify-content:space-between; margin:12px 2px 10px}
  h1{margin:0; font-size:22px; letter-spacing:.3px}
  .sub{margin:2px 0 0; color:var(--muted); font-size:13px}

  /* Progress */
  .progress{display:flex; align-items:center; gap:10px; padding:8px 2px 0}
  .p-dot{
    width:10px;height:10px; border-radius:999px; background:#dfe4e0; position:relative; overflow:hidden;
  }
  .p-dot[data-active="true"]{background:#cfe0d7; box-shadow:0 0 0 3px var(--ring) inset}
  .p-line{flex:1; height:2px; background:#e8ece9; border-radius:999px; overflow:hidden; position:relative}
  .p-line i{position:absolute; left:0; top:0; height:100%; width:0%; background:linear-gradient(90deg,#b6d2c3,#8FB8A8); transition:width .2s ease}

  /* Card */
  .card{
    margin-top:14px; background:var(--card); border-radius:var(--r-lg);
    box-shadow:var(--shadow); padding:14px;
    animation:fade .18s ease;
  }
  @keyframes fade{from{opacity:0; transform:translateY(6px)} to{opacity:1; transform:translateY(0)}}

  /* Grid chips */
  .grid{display:flex; flex-wrap:wrap; gap:10px}
  .chip{
    appearance:none; border:none; background:#fff; border:1px solid #ecebea;
    padding:12px 14px; border-radius:16px; cursor:pointer;
    display:inline-flex; gap:8px; align-items:center;
    box-shadow:0 1px 0 rgba(0,0,0,.03);
    transition:transform .12s ease, box-shadow .12s ease, border-color .12s ease;
    min-height:48px;
  }
  .chip:active{transform:var(--tap)}
  .chip svg{width:18px;height:18px; opacity:.9}
  .chip[data-selected="true"]{
    background:linear-gradient(180deg,#fff,#f3f7f5);
    border-color:#dfe9e4; color:#365a4b; box-shadow:0 10px 18px var(--ring);
  }

  /* Bottom action bar: æ‹‡æŒ‡å¯é» */
  .bar{
    position:fixed; left:0; right:0; bottom:0; background:rgba(247,244,239,.88);
    backdrop-filter: blur(6px); border-top:1px solid #eae5de; padding:10px 12px;
  }
  .bar-inner{max-width:780px; margin:0 auto; display:flex; gap:10px}
  .btn{
    flex:1; display:inline-flex; align-items:center; justify-content:center; gap:8px;
    padding:14px; border-radius:16px; border:1px solid transparent; cursor:pointer;
    font-weight:700; letter-spacing:.3px; min-height:50px; user-select:none; transition:.12s ease;
  }
  .btn:active{transform:var(--tap)}
  .btn.primary{background:linear-gradient(180deg,#a9cbbb,#8FB8A8); color:#0c2f24; box-shadow:0 10px 22px var(--ring)}
  .btn.ghost{background:#fff; color:#6a5a4f; border-color:#eadfd4}
  .btn.wood{background:linear-gradient(180deg,#b9967f,#9C7E68); color:#fff}

  .hint{font-size:13px; color:#566b62; background:#f4f8f6; border:1px dashed #d7e6df; padding:10px; border-radius:12px; margin-top:10px}

  /* Result */
  .quote{background:#fffdf7; border:1px solid #f0e8d9; color:#6b4f2e; border-radius:16px; padding:12px; margin-top:10px}
  .res-line{margin:6px 0}
  .heart{
    width:56px;height:56px;border-radius:50%;display:grid;place-items:center;margin:10px auto 0;
    background:#fff; border:1px solid #e8e3dd; box-shadow:var(--shadow-soft); cursor:pointer; transition:.12s ease;
  }
  .heart[data-on="true"]{background:#ffe9ed; border-color:#ffd1da}
  .toast{
    position:fixed; left:50%; bottom:22px; transform:translateX(-50%);
    background:#1f1f1f; color:#fff; padding:10px 14px; border-radius:12px; opacity:0; transition:.18s; z-index:9999; font-size:13px
  }

  /* a11y */
  .sr-only{position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0}
</style>
</head>
<body>
  <div class="wrap">
    <!-- HERO -->
    <div class="hero" role="img" aria-label="å°å—å··å¼„èˆ‡å’–å•¡å»³æ°›åœåœ–">
      <div class="hero-tag" aria-hidden="true">
        <!-- æ‰‹å¯«è²¼ç´™é¢¨ icon -->
        <svg viewBox="0 0 24 24" fill="none"><path d="M12 3l2.4 4.9 5.4.8-3.9 3.8.9 5.4L12 15.9 7.2 18l.9-5.4L4.2 8.7l5.4-.8L12 3z" stroke="#6a9886" stroke-width="1.2"/></svg>
        <span>å°ˆå±¬å¦³çš„å†’éšª</span>
      </div>
    </div>

    <!-- Header -->
    <header>
      <div>
        <h1>å°å—æµªæ¼«å†’éšªè§£é–</h1>
        <p class="sub">é€™ä¸æ˜¯æ™®é€šçš„æ—…è¡Œï¼Œè€Œæ˜¯å±¬æ–¼å¦³çš„ 1 åˆ†é˜å°é¸æ“‡ã€‚</p>
      </div>
    </header>

    <!-- Progress -->
    <div class="progress" aria-label="é€²åº¦æŒ‡ç¤º" aria-live="polite">
      <div class="p-dot" data-step="1"></div>
      <div class="p-line"><i id="pline"></i></div>
      <div class="p-dot" data-step="2"></div>
      <div class="p-line"><i></i></div>
      <div class="p-dot" data-step="3"></div>
      <div class="p-line"><i></i></div>
      <div class="p-dot" data-step="4"></div>
    </div>

    <!-- SCREEN å®¹å™¨ -->
    <main id="panel" class="card" tabindex="-1" aria-live="polite">
      <!-- Welcome -->
      <section data-screen="welcome">
        <h2 class="sr-only">é–‹å ´</h2>
        <p class="hint">å¦³åšçš„æ¯ä¸€å€‹å°é¸æ“‡ï¼Œéƒ½æœƒæ‚„æ‚„æ”¹è®Šæˆ‘å€‘çš„è·¯ç·šã€‚æ²’æœ‰æ­£ç¢ºç­”æ¡ˆï¼Œåªæœ‰ç­‰å¦³ç™¼ç¾çš„é¢¨æ™¯ã€‚</p>
        <p style="margin:12px 0 0">å› ç‚ºæœ‰å¦³ï¼Œå°å—æ‰æœƒè®Šå¾—ä¸ä¸€æ¨£ã€‚</p>
      </section>

      <!-- Step 1 ä¸»é¡Œ -->
      <section data-screen="step1" hidden>
        <h3 style="margin:0 0 8px">ä»Šå¤©æœ€æƒ³å±•é–‹çš„æ–‡é’å ´æ™¯æ˜¯ï¼Ÿ</h3>
        <div class="grid" role="group" aria-label="æ–‡é’å ´æ™¯é¸æ“‡">
          <button class="chip" data-value="å¥‡ç¾åšç‰©é¤¨ ğŸ¨ï¼ˆå±•è¦½ï¼‹è—è¡“ï¼‹æ‹ç…§ï¼‰" data-icon="ğŸ¨"><span>ğŸ¨</span>å¥‡ç¾åšç‰©é¤¨</button>
          <button class="chip" data-value="å­”å»Ÿè€è¡— ğŸ®ï¼ˆæ­·å²æ°›åœï¼‹ç‰¹è‰²å°åº—ï¼‰" data-icon="ğŸ®"><span>ğŸ®</span>å­”å»Ÿè€è¡—</button>
          <button class="chip" data-value="åé¼“ç³–å»  ğŸŒ™ï¼ˆå·¥æ¥­éºè·¡ï¼‹å¤œé–“ç‡ˆå…‰ï¼‰" data-icon="ğŸŒ™"><span>ğŸŒ™</span>åé¼“ç³–å» </button>
          <button class="chip" data-value="äº¤çµ¦ä½ å®‰æ’ ğŸ" data-icon="ğŸ"><span>ğŸ</span>äº¤çµ¦ä½ å®‰æ’</button>
        </div>
        <p id="fb1" class="hint" style="display:none; margin-top:10px"></p>
      </section>

      <!-- Step 2 é£Ÿç‰©/é£²å“ -->
      <section data-screen="step2" hidden>
        <h3 style="margin:0 0 8px">æ—…ç¨‹è£¡ï¼Œå¦³æœ€æƒ³æŠŠå“ªå€‹å‘³é“å¯«é€²ä»Šå¤©ï¼Ÿ</h3>
        <div class="grid" role="group" aria-label="é£Ÿç‰©èˆ‡é£²å“åå¥½">
          <button class="chip" data-value="å°å—å°åƒ ğŸœï¼ˆç‰›è‚‰æ¹¯/æ“”ä»”éºµ/æ£ºææ¿ï¼‰"><span>ğŸœ</span>å°å—å°åƒ</button>
          <button class="chip" data-value="è€å’–å•¡å»³ â˜•ï¼ˆè€å®…çš„æ‰‹æ²–èˆ‡æœ¨è³ªé¦™ï¼‰"><span>â˜•</span>è€å’–å•¡å»³</button>
          <button class="chip" data-value="ç”œé»æˆ–å†°å“ ğŸ§ï¼ˆå¯æ„›ç™‚ç™’ä¸€ä¸‹ï¼‰"><span>ğŸ§</span>ç”œé»æˆ–å†°å“</button>
          <button class="chip" data-value="äº¤çµ¦ä½ å®‰æ’ ğŸï¼ˆæˆ‘æƒ³è¦é©šå–œï¼‰"><span>ğŸ</span>äº¤çµ¦ä½ å®‰æ’</button>
        </div>
        <p id="fb2" class="hint" style="display:none; margin-top:10px"></p>
      </section>

      <!-- Step 3 å’–å•¡å»³æ°›åœ -->
      <section data-screen="step3" hidden>
        <h3 style="margin:0 0 8px">ä¼‘æ¯çš„æ™‚å€™ï¼Œæˆ‘å€‘è¦ååœ¨å“ªå€‹è§’è½ï¼Ÿ</h3>
        <div class="grid" role="group" aria-label="å’–å•¡å»³æ°›åœ">
          <button class="chip" data-value="KKOBA Apartmentï¼ˆæ–‡é’ç°¡ç´„ã€å®‰éœèŠå¤©ï¼‰"><span>ğŸ </span>KKOBA Apartment</button>
          <button class="chip" data-value="è‰æœ¨æ£®èŠ±ï¼ˆè€å®…ï¼‹èŠ±è—æ„Ÿï¼‰"><span>ğŸŒ¿</span>è‰æœ¨æ£®èŠ±</button>
          <button class="chip" data-value="é¹½åŸ•è€å’–å•¡å»³ç¾¤ï¼ˆéš¨æ©ŸæŒ‘ä¸€å®¶ï¼‰"><span>ğŸšï¸</span>é¹½åŸ•è€å’–å•¡å»³ç¾¤</button>
          <button class="chip" data-value="å¯æ„›ç”œé»é¢¨å’–å•¡ï¼ˆç¹½ç´›ç™‚ç™’ï¼‰"><span>ğŸ°</span>å¯æ„›ç”œé»é¢¨</button>
          <button class="chip" data-value="äº¤çµ¦ä½ å®‰æ’ï¼ˆæƒ³çœ‹ä½ çš„å°ä»»æ€§ï¼‰"><span>âœ¨</span>äº¤çµ¦ä½ å®‰æ’</button>
        </div>
        <p id="fb3" class="hint" style="display:none; margin-top:10px"></p>
      </section>

      <!-- Step 4 å½©è›‹ -->
      <section data-screen="step4" hidden>
        <h3 style="margin:0 0 8px">ä»Šå¤©çš„ç•«é¢ï¼Œè¦æ€éº¼ç•™ï¼Ÿ</h3>
        <div class="grid" role="group" aria-label="æµªæ¼«æ”¶å°¾">
          <button class="chip" data-value="é¢¨æ™¯ç…§ ğŸŒ†"><span>ğŸŒ†</span>é¢¨æ™¯ç…§</button>
          <button class="chip" data-value="æˆ‘å€‘çš„åˆç…§ ğŸ“¸"><span>ğŸ“¸</span>æˆ‘å€‘çš„åˆç…§</button>
          <button class="chip" data-value="åªæœ‰æˆ‘å€‘æ‡‚çš„ç§å¯†ç•«é¢ ğŸ’Œ"><span>ğŸ’Œ</span>ç§å¯†ç•«é¢</button>
          <button class="chip" data-value="é‡è¦‹äº†å†èªª"><span>ğŸŒŸ</span>é‡è¦‹äº†å†èªª</button>
        </div>
        <p id="fb4" class="hint" style="display:none; margin-top:10px"></p>
      </section>

      <!-- çµæœ -->
      <section data-screen="result" hidden>
        <h3 style="margin:0 0 8px">è§£é–å®Œæˆï¼ä»Šå¤©çš„å°å—ï¼Œå› å¦³è€Œå®šç¾©</h3>
        <div id="summary" class="quote" aria-live="polite"></div>
        <div class="heart" role="button" aria-label="é»æ“Šæ„›å¿ƒ" tabindex="0"><span aria-hidden="true">â¤</span></div>
        <p style="text-align:center;color:var(--muted);font-size:13px">é»æ„›å¿ƒçœ‹çœ‹</p>
      </section>
    </main>
  </div>

  <!-- åº•éƒ¨æ“ä½œåˆ— -->
  <div class="bar" role="navigation" aria-label="æ“ä½œåˆ—">
    <div class="bar-inner">
      <button class="btn ghost" id="btnBack">ä¸Šä¸€æ­¥</button>
      <button class="btn wood" id="btnRandom">éš¨æ©Ÿ</button>
      <button class="btn primary" id="btnNext">ä¸‹ä¸€æ­¥</button>
    </div>
  </div>

<script>
  // æ–‡æ¡ˆå›é¥‹
  const FB = {
    step1:[
      "é‚£è£¡çš„å…‰å½±ï¼Œæœƒå¾ˆé©åˆå¦³çš„ç¬‘å®¹ã€‚",
      "æ™‚é–“æ…¢ä¸‹ä¾†ï¼Œæ­£å¥½è®“æˆ‘å¤šçœ‹å¦³ä¸€çœ¼ã€‚",
      "åœ¨ç‡ˆå…‰ä¸‹ï¼Œæˆ‘æƒ³å’Œå¦³é è¿‘ä¸€é»ã€‚"
    ],
    step2:[
      "å°å—çš„æ—¥å¸¸ï¼ŒåŠ ä¸Šå¦³ï¼Œå°±è®Šæˆç¨ä¸€ç„¡äºŒçš„å‘³é“ã€‚",
      "è€å®…è£¡çš„æº«åº¦ï¼Œä¸å¦‚å¦³çš„ä¸€å¥è©±æš–ã€‚",
      "ç”œé»å¯ä»¥åƒï¼Œä½†æœ€ç”œçš„æ˜¯é€™è¶Ÿæ—…ç¨‹ã€‚",
      "é©šå–œæº–å‚™å¥½ï¼Œå°±ç­‰å¦³çš„ç¬‘å®¹ä¾†æ­æ›‰ã€‚"
    ],
    step3:[
      "é‚£å°±æŠŠä¸‹åˆå…‰ï¼Œç•™åœ¨æ¯ç·£ä¸Šã€‚",
      "èŠ±é–‹åœ¨æ¡Œä¸Šï¼Œæº«æŸ”åœ¨å¿ƒè£¡ã€‚",
      "å°‹æ‰¾åªå±¬æ–¼ä»Šå¤©çš„å°ç¢ºå¹¸ã€‚",
      "å¯æ„›ï¼Œæ˜¯ä»Šå¤©çš„é—œéµå­—ã€‚"
    ],
    step4:[
      "é€™å…‰å¥½åƒåœ¨ç­‰æˆ‘å€‘ã€‚",
      "é‚£äº›åªå±¬æ–¼æˆ‘å€‘çš„ç¬é–“ï¼Œæˆ‘æœƒå°å¿ƒæ”¶è—ã€‚"
    ]
  };

  const panel = document.getElementById('panel');
  const btnBack = document.getElementById('btnBack');
  const btnNext = document.getElementById('btnNext');
  const btnRandom = document.getElementById('btnRandom');
  const pline = document.getElementById('pline');

  const state = { step:0, picks:{} }; // 0 welcome, 1..4 steps, 5 result
  const sections = {
    welcome: qs('[data-screen="welcome"]'),
    step1: qs('[data-screen="step1"]'),
    step2: qs('[data-screen="step2"]'),
    step3: qs('[data-screen="step3"]'),
    step4: qs('[data-screen="step4"]'),
    result: qs('[data-screen="result"]'),
  };

  function qs(s,root=document){ return root.querySelector(s); }
  function qsa(s,root=document){ return [...root.querySelectorAll(s)]; }
  const rand = arr => arr[Math.floor(Math.random()*arr.length)];
  const toast = (m)=>{
    const t=document.createElement('div'); t.className='toast'; t.textContent=m;
    document.body.appendChild(t); requestAnimationFrame(()=>t.style.opacity=1);
    setTimeout(()=>{t.style.opacity=0; setTimeout(()=>t.remove(),180)},1400);
  };

  function setProgress(){
    // å¡«ç¬¬ä¸€æ®µç·šæ¢ç™¾åˆ†æ¯”ï¼ˆå…¶é¤˜ç´”é»ï¼‰
    const p = Math.min(Math.max(state.step,1),4);
    qsa('.p-dot').forEach((d,i)=> d.dataset.active = (i < p) ? 'true' : 'false');
    pline.style.width = ((p-1)/3)*100 + '%';
  }

  function show(name){
    Object.values(sections).forEach(s=> s.hidden = true);
    sections[name].hidden = false;
    panel.focus();
  }

  function toStep(n){
    state.step = n;
    setProgress();
    if(n===0){ show('welcome'); btnBack.textContent='ä¸Šä¸€æ­¥'; btnNext.textContent='é–‹å§‹'; return; }
    show('step'+n);
    btnBack.textContent = n===1 ? 'è¿”å›' : 'ä¸Šä¸€æ­¥';
    btnNext.textContent = n<4 ? 'ä¸‹ä¸€æ­¥' : 'å®Œæˆ';
  }

  // Welcome -> Step1
  toStep(1);

  // ç¶å®š chips è¡Œç‚ºï¼ˆå–®é¸ï¼‰
  ['step1','step2','step3','step4'].forEach(key=>{
    const sec = sections[key];
    const chips = qsa('.chip', sec);
    const fb = qs('#'+key.replace('step','fb'), panel);

    chips.forEach(ch=>{
      ch.addEventListener('click', ()=>{
        chips.forEach(c=> c.dataset.selected='false');
        ch.dataset.selected='true';
        state.picks[key] = ch.dataset.value;
        if(fb){ fb.style.display='block'; fb.textContent = rand(FB[key]); }
      });
    });
  });

  // åº•éƒ¨æ“ä½œåˆ—ï¼šä¸Šä¸€é /éš¨æ©Ÿ/ä¸‹ä¸€é 
  btnBack.addEventListener('click', ()=>{
    if(state.step<=1){ toStep(1); return; }
    toStep(state.step-1);
  });

  btnRandom.addEventListener('click', ()=>{
    const key = 'step'+state.step;
    const sec = sections[key];
    const chips = qsa('.chip', sec);
    if(!chips.length) return;
    const pick = rand(chips); pick.click();
    toast('æ›¿å¦³æŠ½äº†ä¸€å€‹å°é©šå–œ');
  });

  btnNext.addEventListener('click', ()=>{
    if(state.step<4){ toStep(state.step+1); return; }
    // å®Œæˆï¼Œç”Ÿæˆçµæœ
    buildResult(); show('result'); btnBack.textContent='é‡ä¾†'; btnNext.textContent='è¤‡è£½'; setProgressDone();
  });

  // å®Œæˆå¾Œï¼šé€²åº¦æ»¿
  function setProgressDone(){
    qsa('.p-dot').forEach(d=> d.dataset.active='true');
    pline.style.width = '100%';
  }

  // çµæœå¡
  function buildResult(){
    const s1 = state.picks.step1 || 'äº¤çµ¦ä½ å®‰æ’ ğŸ';
    const s2 = state.picks.step2 || 'äº¤çµ¦ä½ å®‰æ’ ğŸ';
    const s3 = state.picks.step3 || 'äº¤çµ¦ä½ å®‰æ’';
    const s4 = state.picks.step4 ? `å°æ”¶å°¾ï¼š${state.picks.step4}` : 'å°æ”¶å°¾ï¼šé‡è¦‹äº†å†èªªã€‚';

    const q = `æ—…è¡Œæœ‰é¢¨æ™¯ã€æœ‰æ•…äº‹ï¼Œä½†æœ€ç¾çš„ç¬é–“ï¼Œå¸¸å¸¸åœ¨ä¸ç¶“æ„çš„é è¿‘ã€‚<br>ä¸ç®¡å»å“ªè£¡ï¼Œæˆ‘çœŸæ­£æƒ³çœ‹åˆ°çš„é¢¨æ™¯ï¼Œåªæœ‰å¦³ã€‚`;
    const html = `
      <div class="res-line">ç¬¬ä¸€å¹•ï¼š<b>${clean(s1)}</b></div>
      <div class="res-line">å‘³é“æ˜¯ï¼š<b>${clean(s2)}</b></div>
      <div class="res-line">ä¼‘æ¯æˆ‘å€‘å»ï¼š<b>${clean(s3)}</b></div>
      <div class="res-line">${s4}</div>
      <div class="quote" style="margin-top:10px">${q}</div>
    `;
    qs('#summary').innerHTML = html;

    const heart = qs('.heart');
    heart.dataset.on="false";
    heart.onclick = ()=>toggleHeart(heart);
    heart.onkeypress = e=>{ if(e.key==='Enter'||e.key===' ') toggleHeart(heart); };

    // èª¿æ•´åº•éƒ¨æŒ‰éˆ•ï¼šé‡ä¾† / è¤‡è£½ / åˆ†äº«
    btnBack.onclick = ()=> location.reload();
    btnNext.onclick = copySummary;
    btnRandom.onclick = shareSummary;
    btnRandom.textContent = 'åˆ†äº«';
  }

  function clean(s){ return s.replace(/^A\.|^B\.|^C\.|^D\.|\(.+\)$/g,'').trim(); }

  async function copySummary(){
    const text = qs('#summary').innerText.replace(/\n{2,}/g,"\n").trim();
    try{ await navigator.clipboard.writeText(text); toast('å·²è¤‡è£½å…¨æ–‡'); }catch{ toast('è¤‡è£½å¤±æ•—ï¼Œè«‹æ‰‹å‹•é¸å–'); }
  }
  async function shareSummary(){
    const text = qs('#summary').innerText.replace(/\n{2,}/g,"\n").trim();
    if(navigator.share){ try{ await navigator.share({text}); }catch{} }
    else{ copySummary(); }
  }
  function toggleHeart(el){
    const on = el.dataset.on === 'true';
    el.dataset.on = String(!on);
    toast(!on ? 'å¦³ï¼Œå°±æ˜¯æˆ‘ä»Šå¤©æœ€æƒ³è¨˜ä½çš„ç•«é¢ã€‚' : 'æˆ‘æœƒæŠŠå–œæ­¡å…ˆæ”¾å›å£è¢‹ã€‚');
  }
</script>
</body>
</html>
